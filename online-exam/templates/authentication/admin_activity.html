{% extends 'base.html' %}
{% block title %}Activity & Reports{% endblock %}
{% block content %}
<h2>Activity & Reports</h2>
<p>Total Questions: <strong>{{ questions_count }}</strong></p>
<p>Total Submissions: <strong>{{ submissions_count }}</strong></p>

<h3>Questions by Teacher</h3>
<table border="1" cellpadding="6">
  <tr><th>Teacher</th><th>Questions</th></tr>
  {% for row in created_by_teacher %}
  <tr><td>{{ row.author__username|default:'(unknown)' }}</td><td>{{ row.cnt }}</td></tr>
  {% empty %}
  <tr><td colspan="2">No data</td></tr>
  {% endfor %}
</table>

<h3>Submissions by Student</h3>
<table border="1" cellpadding="6">
  <tr><th>Student</th><th>Attempts</th><th>Total</th><th>Average</th></tr>
  {% for row in submissions_by_student %}
  <tr>
    <td>{{ row.student__username }}</td>
    <td>{{ row.cnt }}</td>
    <td>{{ row.total|default:0 }}</td>
    <td>{{ row.avg|floatformat:2 }}</td>
  </tr>
  {% empty %}
  <tr><td colspan="4">No data</td></tr>
  {% endfor %}
</table>
{% endblock %}


