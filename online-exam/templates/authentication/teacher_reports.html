{% extends 'base.html' %}
{% load static %}
{% block title %}Performance Reports{% endblock %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">

<div class="dashboard-container">

    <!-- Sidebar -->
    <div class="dashboard-sidebar">
        <h2>Performance Reports</h2>
        <a href="{% url 'questions_list' %}">Manage Questions</a>
        <a href="{% url 'submissions_list' %}">All Submissions</a>
        <a href="{% url 'teacher_reports' %}" class="active">Performance Reports</a>
    </div>

    <!-- Main Content -->
    <div class="dashboard-main">
        <h2>Performance Reports</h2>

        <h3>By Student</h3>
        <table>
            <tr>
                <th>Student</th>
                <th>Attempts</th>
                <th>Total</th>
                <th>Average</th>
            </tr>
            {% for row in by_student %}
            <tr>
                <td>{{ row.student__username }}</td>
                <td>{{ row.attempts }}</td>
                <td>{{ row.total|default:0 }}</td>
                <td>{{ row.avg|floatformat:2 }}</td>
            </tr>
            {% empty %}
            <tr><td colspan="4">No data</td></tr>
            {% endfor %}
        </table>

        <h3>By Question</h3>
        <table>
            <tr>
                <th>Question ID</th>
                <th>Attempts</th>
                <th>Average</th>
            </tr>
            {% for row in by_question %}
            <tr>
                <td>{{ row.question_id }}</td>
                <td>{{ row.attempts }}</td>
                <td>{{ row.avg|floatformat:2 }}</td>
            </tr>
            {% empty %}
            <tr><td colspan="3">No data</td></tr>
            {% endfor %}
        </table>
    </div>

</div>

{% endblock %}
