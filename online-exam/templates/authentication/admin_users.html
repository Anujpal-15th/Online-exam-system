{% extends 'base.html' %}
{% load static %}
{% block title %}Manage Users{% endblock %}
{% block content %}

<link rel="stylesheet" type="text/css" href="{% static 'css/dashboard.css' %}">

<div class="dashboard-container">

  <!-- Sidebar -->
  <div class="dashboard-sidebar">
    <h2>Management</h2>
    <a href="{% url 'questions_list' %}">Manage Questions</a>
    <a href="{% url 'admin_users' %}">Manage Users</a>
    <a href="{% url 'admin_activity' %}">Reports</a>
  </div>

  <!-- Main content -->
  <div class="dashboard-main">
        <h2>Management</h2>
    <table>
      <tr>
        <th>ID</th>
        <th>Username</th>
        <th>Email</th>
        <th>Role</th>
        <th>Actions</th>
      </tr>
      {% for u in users %}
      <tr>
        <td>{{ u.id }}</td>
        <td>{{ u.username }}</td>
        <td>{{ u.email }}</td>
        <td>{{ u.get_user_type_display }}</td>
        <td>
          {% if u.id != user.id %}
          <form method="POST" action="{% url 'admin_delete_user' u.id %}" style="display:inline;">
            {% csrf_token %}
            <button type="submit" onclick="return confirm('Delete user {{ u.username }}?')">Delete</button>
          </form>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </table>
     <!-- Create User box -->
    <a href="{% url 'admin_create_user' %}" class="create-user-box">Create User</a>
    
  </div>

</div>

{% endblock %}
